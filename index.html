<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway" />

    <title>Interest Calculator</title>
</head>

<body>
    <div class="container body">
        <div class= "calculadora" id="frame">
            <canvas id="myChart" ></canvas>
        <div class="row calculadora-body justify-content-center">
            <div class="row bloques" id="titulo">
                <div class="col titulo">
                    Compound Interest Calculator
                </div>
            </div>
            <div class="row bloques" id="deposito">
                <div class="col-12 bloque bloque-text text-center">
                    Deposito inicial
                </div>
                <div class="col-md-12 bloque bloque-input">
                    <input class="form-control form-control-md" style="border-radius: 20px; border:0px;" type="number" placeholder="10.000€" id="principal">
                </div>
            </div>
            <div class="row bloques" id="contribucion">
                <div class="col-12 bloque bloque-text text-center">
                    Contribución mensual
                </div>
                <div class="col-md-12 bloque bloque-input">
                    <input class="form-control form-control-md" style="border-radius: 20px; border:0px" type="number" placeholder="100€" id="additionalCash" >
                </div>
            </div>
            <div class="row bloques" id="timeOfInvestment">
                <div class="col-12 bloque bloque-text text-center">
                    Tiempo a invertir
                </div>
                <div class="col-md-12 bloque bloque-input">
                    <input class="form-control form-control-md" style="border-radius: 20px; border:0px" type="number" placeholder="10 años" id="termOfLoan">
                </div>
            </div>
            <div class="row bloques" id="typeOfInvestment">
                <div class="col-12 bloque bloque-text text-center">
                    Tipo de inversión
                </div>
                <div class="col-md-12 bloque bloque-input">
                    <select class="form-control form-select form-control-md" style="border-radius: 20px; border:0px" placeholder="Seleccione una de las opciones" id="interestRate">
                        <option style="border-radius: 20px; border:0px" value="0.10">Riesgo bajo (10%)</option>
                        <option value="0.20">Riesgo medio (20%)</option>
                        <option value="0.30">Riesgo alto (30%)</option>
                    </select>
                </div>
            </div>
            <div class="row bloques" id="bottonCalc">
                <div class="col-12 bloque bloque-button text-center">
                    <button class="btn btn-primary" style="border-radius: 20px; border:0px" type="submit" id="botonCalcular" onclick="compoundInterest()">Calcular</button>
                    <br><button class="btn btn-link text-center"  style="display:none;" type="reset" id="botonReset"  onclick="resetBoton()">Reset</button>
                </div>
            </div>
        </div>
        <div id="resultado" style="display:none;">
            <div class="col-12 bloque bloque-resultado text-center" id="montoResultado">
                <div class="bloque bloque-text-resultado">
                    <p>En <ins id="resultadoTiempo"></ins> años habra generado:</p>
                </div>
                <div class="bloque-text-resultado-calculado">
                    <p class="text-center" id="resultadoCalculado"></p>
                </div>
            </div>
        </div>
        </div>
    </div>
    <canvas id="myChart" style="width:100%;max-width:600px"></canvas>
</body>
<style>
    .body{
    font-family: Raleway;
    font-size: medium;
    color: #FFFFFF;
    font-weight: normal;
}

.calculadora{
    position: static;
    width: 408px;
    padding-top: 25px;
    
    background: #363A50;
    border-radius: 20px;
    
    /* Inside auto layout */
}

.titulo {
    font-family: Raleway;
    font-style: normal;
    font-weight: 600;
    font-size: 20px;
    line-height: 28px;
    text-align: center;
    
    text-transform: uppercase;

    color: #FFFFFF;
}

div.bloques{
    padding:5px;
}

div.bloque.bloque-text{
    padding:5px ;
}

div.bloque.bloque-input{
    
    padding-bottom:5px;
    padding-left: 15%;
    padding-right: 15%;
    text-align: center;
}

div.bloque.bloque-button{
    padding-bottom: 10px;
}

div.bloque.bloque-resultado{
    background-color: green;
    margin-left: 0%;
    margin-right: 0%;
    padding: 10px;
    width: 100%;
    border-end-start-radius: 20px;
    border-end-end-radius: 20px;
    font-size: 30px;
}

div.bloque.bloque-text-resultado{
    font-size: 15px;
    width: 100%;
}

div.bloque.bloque-text-resultado-calculado{
    font-size: 30px;
    width: 100%;
}


input{
    text-align: center;
}

ins{
    text-decoration: none;
    font-weight: bold;
    font-size:20px;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
</script>
<script>

var principal = 0;
var interestRate = 0;
var timesCompounded = 0;
var termOfLoan = 0;
var additionalCash = 0;
var amount = 0;

function compoundInterest(){

    document.getElementById("resultado").style.display = "block";
    document.getElementById("botonReset").style.display = "inline";
    event.preventDefault();

    const principal = parseFloat(document.getElementById("principal").value);
    const termOfLoan = parseFloat(document.getElementById("termOfLoan").value);
    const additionalCash = parseFloat(document.getElementById("additionalCash").value);
    const interestRate = parseFloat(document.getElementById("interestRate").value);
    
    var a = interestRate;
    var b = 1 + a;
    console.log(b);
    var c = termOfLoan;
    var d = Math.pow(b, c);
    var e = additionalCash * 12;
    var p = principal;
    var previousAmount = p;

    var finalAmount = 0;

    var formatter = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
      
        // These options are needed to round to whole numbers if that's what you want.
        //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)
        //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)
      });
    
    for (i=1; i<=c; i++){

        console.log("Iteration" +i);
        console.log("Previous amount "+previousAmount);

        var iteration = (previousAmount * b)+e;

        p = e;

        console.log("Iteration: " + iteration);

        previousAmount = iteration;

        console.log("previous amount: "+previousAmount);

    }

    finalAmount = formatter.format(iteration.toFixed(2));

    var interest = (finalAmount - (principal*c)).toFixed(2);

    document.getElementById("resultadoTiempo").innerHTML = c;
    document.getElementById("resultadoCalculado").innerHTML= finalAmount

}

function resetBoton(){
    document.getElementById("principal").value = '';
    document.getElementById("additionalCash").value = '';
    document.getElementById("termOfLoan").value = '';
    document.getElementById("resultado").style.display = "none";
    document.getElementById("botonReset").style.display = "none";
}
</script>
<script>
    var xValues = [1,10,20,30];
    
    new Chart("myChart", {
      type: "line",
      data: {
        labels: xValues,
        datasets: [{ 
          data: [860,1140,1060,1060,1070,1110,1330,2210,7830,2478],
          borderColor: "red",
          fill: false
        }, { 
          data: [1600,1700,1700,1900,2000,2700,4000,5000,6000,7000],
          borderColor: "green",
          fill: false
        }, { 
          data: [0,],
          borderColor: "blue",
          fill: false
        }]
      },
      options: {
        legend: {display: false}
      }
    });
</script>

</html>